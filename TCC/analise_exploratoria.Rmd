---
title: "Análise Exploratória"
author: "Eduardo Freire, Marina Mangini"
date: "2023-09-10"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r}
library(PNSIBGE)
tipo_de_parto_vars <- c("V0001", "C011", "S065", "V00291", "S068", "C008", "C009", "VDF004", "C009", "I00404", "D00901", "S114", "S125", "S066", "S06701", "S06702", "S06703", "S118", "S116", "S06701", "S06702", "S06703", "S112", "S128", "S129", "S073", "S074", "S080", "R032", "R037", "S115", "V00291")
pns2019 <- get_pns(
   year=2019, 
   vars=tipo_de_parto_vars,
   selected=FALSE, 
   anthropometry=FALSE, 
   labels=TRUE, 
   deflator=TRUE, 
   design=TRUE, 
   savedir=tempdir()
)

save(pns2019, file="pns2019.Rdata")
```


```{r}
load("pns2019.Rdata")
```


```{r}
library(dplyr)
library(ggplot2)
library(kableExtra)
### Critérios para a subamostra
# S065 == 'Sim'
# S068 == 'Sim'
```

Justificar porque escolhemos apenas parto vaginal para parto humanizado.

Blocos da análise descritiva

- sociodemográficas da mulher 

- sistema de saúde

- estado de saúde da mulher

Calcular CV em vez de IC.

Cruzar a variável motivo de ter feito a cesárea e renda.

Fazer agregações co base no CV.


CV passou de 15 já ve se faz sentido juntar a categoria. Ver a tabelinha no TCC da Esther e da Pamela.

## Tipo de parto(S115) por cor/raça(C009) - por grupos

```{r}
library(survey)
svyby(~S115, ~C009, subset(pns2019,!is.na(S068)), na.rm=TRUE, FUN=svymean, vartype="cv")
```
## Tipo de parto(S115) por região 

## Tipo de parto(S115) por Escolaridade(D00901) - por grupos

```{r}
library(survey)
svyby(~S115, ~D00901, subset(pns2019,!is.na(S068)), na.rm=TRUE, FUN=svymean, vartype="cv")
```

## Escolaridade(D00901) por Tipo de parto(S115)  - entre grupos

```{r}
library(survey)
svyby(~D00901, ~S115, subset(pns2019,!is.na(S068)), na.rm=TRUE, FUN=svymean, vartype="cv")
```

## Tipo de parto(S115) por faixa de renda domiciliar per capita(VDF004) - Média por grupos

```{r}
library(survey)
svyby(~S115, ~VDF004, subset(pns2019,!is.na(S068)), na.rm=TRUE, FUN=svymean, vartype="cv")
```

## Faixa de renda domiciliar per capita(VDF004) por tipo de parto(S115) - entre grupos

```{r}
library(survey)
svyby(~VDF004, ~S115, subset(pns2019,!is.na(S068)), na.rm=TRUE, FUN=svymean, vartype="cv")
```
## se vive com companheiro

C10A C013

## quantos partos teve

## se teve aborto espontaneo

## criar um índice de saúde ou usar as variáveis individuais(IMC, diabetes, pressão alta)


## Tipo de parto(S115) por estado civil(C011) - por grupos

```{r}
library(survey)
svyby(~S115, ~C011, subset(pns2019,!is.na(S068)), na.rm=TRUE, FUN=svymean, vartype="cv")
```

## Estado civil(C011) por tipo de parto(S115) - entre grupos

```{r}
library(survey)
svyby(~C011, ~S115, subset(pns2019,!is.na(S068)), na.rm=TRUE, FUN=svymean, vartype="cv")
```


## variável se pagou pelo parto

## Tipo de parto(S115) por tipo de atendimento(SUS ou não SUS)(S114) - por grupos

```{r}
library(survey)
svyby(~S115, ~S114, subset(pns2019,!is.na(S068)), na.rm=TRUE, FUN=svymean, vartype="cv")
```

## Tipo de atendimento(SUS ou não SUS)(S114) por tipo de parto(S115) - entre grupos

```{r}
library(survey)
svyby(~S114, ~S115, subset(pns2019,!is.na(S068)), na.rm=TRUE, FUN=svymean, vartype="cv")
```





